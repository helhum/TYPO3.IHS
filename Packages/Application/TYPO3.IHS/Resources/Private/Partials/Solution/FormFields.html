<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:f="http://xsd.helmut-hummel.de/ns/TYPO3/Fluid/ViewHelpers">

<f:section name="Content">
		<f:form.hidden property="{propertyPrefix}issue" value="{arguments.issue}" />
		<div class="form-group">
			<label for="solution-author">Author</label>
			<f:form.textfield class="form-control" id="solution-author" property="{propertyPrefix}author" value="{object.author}" />
		</div>

		<div class="form-group">
			<label for="solution-abstract">Abstract</label>
			<f:form.textarea class="form-control markdown" id="solution-abstract" property="{propertyPrefix}abstract" value="{object.abstract}" />
		</div>

		<div class="form-group">
			<label for="solution-description">Description</label>
			<f:form.textarea class="form-control markdown" id="solution-description" property="{propertyPrefix}description" value="{object.description}" />
		</div>

		<div class="form-group">
			<label for="solution-fixedInVersions">Fixed in versions</label>
			<f:form.select class="form-control" id="solution-fixedInVersions" multiple="multiple" options="{arguments.issue.product.versions}" optionLabelField="humanReadableVersionNumber" property="{propertyPrefix}fixedInVersions" size="5" value="{object.fixedInVersions}" />

			<a class="btn btn-default add-new-versions" role="button" data-toggle="modal" href="{f:uri.action(action:'newVersion', controller:'Product', package:'TYPO3.IHS')}" data-target="#new-versions-modal">Add new Version</a>
			<div class="created-versions-outer">
				<p>
					Angelegte Versionen:
				</p>
				<div class="created-versions" data-delete-url="{f:uri.action(action:'deleteVersion', controller:'Product', package:'TYPO3.IHS')}">
					<ul></ul>
				</div>
			</div>
		</div>
		<fieldset>
			<legend>Links for the solution</legend>
			<div class="col-lg-1"></div>
			<div class="col-lg-11">
				<f:render partial="ObjectCollection" section="Content" arguments="{objectName: 'Link', objects: object.links, partial:'Link/FormFields', propertyPrefix: '{propertyPrefix}links.', arguments: {issue: arguments.issue, solution: object}, deleteMode: 'link'}"/>
			</div>
		</fieldset>
		<f:render section="DeleteSolution" arguments="{_all}" />
</f:section>

<f:section name="DeleteSolution">
	<f:if condition="{deleteLinkMode}">
		<f:then>
			<f:switch expression="{deleteLinkMode}">
				<f:case value="existing">
					<f:link.action action="removeSolution" controller="Issue" arguments="{issue: arguments.issue, solution: object}" class="btn btn-danger remove-action"><span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span> Remove Solution</f:link.action>
				</f:case>
				<f:case value="new">
					<a href="javascript:void(0);" class="btn btn-danger delete-item"><span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span> Remove Solution</a>
				</f:case>
			</f:switch>
		</f:then>
	</f:if>
</f:section>
</html>