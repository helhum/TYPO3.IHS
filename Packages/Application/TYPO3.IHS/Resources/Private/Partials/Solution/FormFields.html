<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:f="http://xsd.helmut-hummel.de/ns/TYPO3/Fluid/ViewHelpers">

<f:section name="Content">
	<ul>
		<f:form.hidden property="{propertyPrefix}issue" value="{arguments.issue}" />
		<li>
			<label for="solution-author">Author</label>
			<f:form.textfield property="{propertyPrefix}author" id="solution-author" value="{object.author}" />
		</li>

		<li>
			<label for="solution-abstract">Abstract</label>
			<f:form.textarea property="{propertyPrefix}abstract" class="markdown" id="solution-abstract" value="{object.abstract}" />
		</li>

		<li>
			<label for="solution-description">Description</label>
			<f:form.textarea property="{propertyPrefix}description" class="markdown" id="solution-description" value="{object.description}" />
		</li>

		<li>
			<label for="solution-fixedInVersions">Fixed in versions</label>
			<f:form.select property="{propertyPrefix}fixedInVersions" id="solution-fixedInVersions" options="{arguments.issue.product.versions}" optionLabelField="humanReadableVersionNumber" size="5" multiple="multiple" value="{object.fixedInVersions}" />

			<a class="btn btn-default add-new-versions" role="button" data-toggle="modal" href="{f:uri.action(action:'newVersion', controller:'Product', package:'TYPO3.IHS')}" data-target="#new-versions-modal">Add new Version</a>
			<div class="created-versions-outer">
				<p>
					Angelegte Versionen:
				</p>
				<div class="created-versions" data-delete-url="{f:uri.action(action:'deleteVersion', controller:'Product', package:'TYPO3.IHS')}">
					<ul></ul>
				</div>
			</div>
		</li>
		<li>
			<fieldset>
				<legend>Links for the solution</legend>
				<ul>
					<f:render partial="ObjectCollection" section="Content" arguments="{objectName: 'Link', objects: object.links, partial:'Link/FormFields', propertyPrefix: '{propertyPrefix}links.', arguments: {issue: arguments.issue, solution: object}, deleteMode: 'link'}"/>
				</ul>
			</fieldset>
		</li>
		<f:render section="DeleteSolution" arguments="{_all}" />
	</ul>
</f:section>

<f:section name="DeleteSolution">
	<f:if condition="{deleteLinkMode}">
		<f:then>
			<li>
				<f:switch expression="{deleteLinkMode}">
					<f:case value="existing">
						<f:link.action action="removeSolution" controller="Issue" arguments="{issue: arguments.issue, solution: object}" class="btn btn-danger remove-action">Remove Solution</f:link.action>
					</f:case>
					<f:case value="new">
						<a href="javascript:void(0);" class="btn btn-danger delete-item">Remove Solution</a>
					</f:case>
				</f:switch>
			</li>
		</f:then>
	</f:if>
</f:section>
</html>