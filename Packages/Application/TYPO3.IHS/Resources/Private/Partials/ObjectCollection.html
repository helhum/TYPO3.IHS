<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:f="http://xsd.helmut-hummel.de/ns/TYPO3/Fluid/ViewHelpers">

<f:section name="Content">
	<div class="object-collection">
		<div class="fields">
			<div class="fields-header">
				<f:if condition="{legend}">
					<f:then>
						<legend>{legend}</legend>
					</f:then>
				</f:if>
				<div class="add-field">
					<button class="btn btn-sm btn-primary"><i class="glyphicon glyphicon-plus"></i> Add {objectName}</button>
				</div>
			</div>
			<div class="dynamic-fields">
				<template class="field-template" data-collablseIdentifierPrefix="{collapsIdentifierPrefix}">
					<div class="panel panel-default">
						<div class="panel-heading" role="tab" id="heading-{collapsIdentifierPrefix}-__iteratorIndex__">
							<h4 class="panel-title">
								<a data-toggle="collapse" data-parent="#{collapsIdentifierPrefix}-accordion" href="#collapse-{collapsIdentifierPrefix}-__iteratorIndex__" aria-expanded="true" aria-controls="collapse-{collapsIdentifierPrefix}-__iteratorIndex__">
									{objectName} #__iteratorIndex__
								</a>
								<button type="button" class="btn btn-sm btn-danger toggle-delete-action"><i class="glyphicon glyphicon-trash"></i> Delete {objectName}</button>
							</h4>
						</div>
						<div id="collapse-{collapsIdentifierPrefix}-__iteratorIndex__" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="heading-{collapsIdentifierPrefix}-__iteratorIndex__">
							<div class="panel-body field-template">
								<f:render partial="{partial}" arguments="{arguments: arguments, options:options, propertyPrefix: '{propertyPrefix}_placeholder_.'}" section="Content" />
							</div>
						</div>
					</div>
				</template>
			</div>
			<div class="panel-group" id="{collapsIdentifierPrefix}-accordion" role="tablist" aria-multiselectable="true">
				<div class="present-fields">
					<f:if condition="{objects}">

						<f:for each="{objects}" as="object" iteration="iterator">
							<div class="panel panel-default">
								<div class="panel-heading" role="tab" id="heading-{collapsIdentifierPrefix}-{iterator.index}">
									<h4 class="panel-title">
										<a data-toggle="collapse" data-parent="#{collapsIdentifierPrefix}-accordion" href="#collapse-{collapsIdentifierPrefix}-{iterator.index}" aria-expanded="true" aria-controls="collapse-{collapsIdentifierPrefix}-{iterator.index}">
											<f:if condition="{object.title}">
												<f:then>
													{object.title}
												</f:then>
												<f:else>
													{objectName} #{iterator.index}
												</f:else>
											</f:if>
										</a>
										<button type="button" class="btn btn-sm btn-danger toggle-delete-action"><i class="glyphicon glyphicon-trash"></i> Delete {objectName}</button>
									</h4>
								</div>
								<div id="collapse-{collapsIdentifierPrefix}-{iterator.index}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading-{collapsIdentifierPrefix}-{iterator.index}">
									<div class="panel-body">
										<f:if condition="{propertyPrefix}">
											<f:then>
												<f:render partial="{partial}" arguments="{object: object, iterationIndex: iterator.index, arguments: arguments, options: options, propertyPrefix: '{propertyPrefix}{iterator.index}.'}" section="Content"/>
											</f:then>
											<f:else>
												<f:render partial="{partial}" arguments="{object: object, iterationIndex: iterator.index, arguments: arguments, options: options}" section="Content"/>
											</f:else>
										</f:if>
									</div>
								</div>
							</div>
						</f:for>
					</f:if>
				</div>

				<div class="additional-fields"></div>
			</div>
		</div>
	</div>
</f:section>
</html>