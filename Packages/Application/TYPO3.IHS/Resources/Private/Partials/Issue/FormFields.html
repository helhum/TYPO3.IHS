<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:f="http://xsd.helmut-hummel.de/ns/TYPO3/Fluid/ViewHelpers">

<f:section name="Content">
	{namespace ihs=TYPO3\IHS\ViewHelpers}
	<!-- modal for the creation of new versions -->
	<div id="new-versions-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="new-versions-modal-label" aria-hidden="true">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
			<h3 id="new-versions-modal-label">Add new Versions</h3>
		</div>
		<div class="modal-body">
			loading...
		</div>
		<div class="modal-footer">
			<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
			<a class="btn btn-primary create-versions" href="{f:uri.action(action:'createVersion', controller:'Product', package:'TYPO3.IHS')}">Create</a>
		</div>
	</div>

	<li>
		<label for="title">Title</label>
		<f:form.textfield property="title" id="title" />
	</li>

	<li>
		<label for="abstract">Abstract</label>
		<f:form.textarea property="abstract" class="markdown" data="{iconlibrary: 'fa'}" id="abstract" />
	</li>

	<li>
		<label for="description">Description</label>
		<f:form.textarea property="description" class="markdown" data="{iconlibrary: 'fa'}" id="description" />
	</li>

	<li vulnerabilityTypeUrl="{f:uri.action(action:'getVulnerabilityTypesAsJSON', controller:'Issue', package:'TYPO3.IHS')}">
		<label for="vulnerabilityType">Vulnerability Type</label>
		<f:form.textfield property="vulnerabilityType.value" id="vulnerabilityType" />
	</li>

	<li>
		<label for="reporter">Reporter</label>
		<f:form.textarea property="reporter" id="reporter" />
	</li>

	<li>
		<label for="product">Product</label>
		<f:form.select property="product" id="product" options="{products}" optionLabelField="nameAndShortName" sortByOptionLabel="true" prependOptionLabel="- select one -"/>
		<input type="text" id="productAjax" placeholder="type product to find" autocomplete="off" productsUrl="{f:uri.action(action:'getProductsAsJSON', controller:'Product', package:'TYPO3.IHS')}" versionsUrl="{f:uri.action(action:'getProductversionsAsJSON', controller:'Product', package:'TYPO3.IHS')}"/>
	</li>

	<li id="affected-versions">
		<label for="affectedVersions">Affected Versions</label>
		<f:form.select property="affectedVersions" id="affectedVersions" options="{object.product.versions}" optionLabelField="humanReadableVersionNumber" size="3" multiple="multiple" />
		<div id="selected-affected-versions">
			<ihs:form.lastSubmittedValue property="affectedVersions" />
		</div>
	</li>

	<li>
		<label for="CVE">CVE</label>
		<f:form.textfield property="CVE" id="CVE" />
	</li>

	<li>
		<label for="CVSS">CVSS</label>
		<f:form.textfield property="CVSS" id="CVSS" />
	</li>

	<li>
		<fieldset>
			<legend>Links</legend>
			<ul>
				<f:render partial="ObjectCollection" section="Content" arguments="{objects: object.links, partial:'Link/FormFields'}"/>
			</ul>
		</fieldset>
	</li>

	<f:if condition="{solutionsAvailable}">
		<f:then>
			<li>
				<fieldset>
					<legend>Solutions</legend>
					<ul>
						<f:render partial="ObjectCollection" section="Content" arguments="{objects: object.solutions, partial:'Solution/FormFields', arguments: {issue: object}}"/>
					</ul>
				</fieldset>
			</li>
		</f:then>
		<f:else>
			<p>You can add a solution after the issue has been created.</p>
		</f:else>
	</f:if>

	<f:if condition="advisory">
		<f:then>
			<f:form.hidden property="advisory" value="{advisory}" />
		</f:then>
	</f:if>

</f:section>
</html>