<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:f="http://xsd.helmut-hummel.de/ns/TYPO3/Fluid/ViewHelpers">

<f:section name="Content">
		<table class="table table-striped table-hover">
			<thead>
			<tr>
				<th>Title</th>
				<th>Product</th>
				<th>Creation date</th>
				<th>Actions</th>
			</tr>
			</thead>
			<tbody>
				<f:for each="{issues}" as="issue">
					<tr>
						<td>
							<f:link.action action="show" arguments="{issue: issue}">{issue.title}</f:link.action>
						</td>
						<td>
							{issue.product.qualifiedName}
						</td>
						<td>
							<f:format.date date="{issue.creationDate}" format="d.m.Y - H:i"/>
						</td>
						<td class="actions">
							<div class="btn-toolbar">
								<div class="btn-group">
									<f:if condition="{issue.advisory}">
										<f:then>
											<f:link.action action="show" controller="Advisory" class="btn btn-default btn-sm" arguments="{advisory: issue.advisory}"><i class="glyphicon glyphicon-eye-open"></i> Show Advisory</f:link.action>
										</f:then>
										<f:else>
											<f:if condition="{issue.solutions}">
												<f:link.action action="createAdvisory" class="btn btn-primary btn-sm" arguments="{issue: issue}"><i class="glyphicon glyphicon-plus"></i> Create Advisory</f:link.action>
											</f:if>
										</f:else>
									</f:if>
								</div>
								<div class="btn-group">
									<f:link.action action="edit" class="btn btn-primary btn-sm" arguments="{issue: issue}"><i class="glyphicon glyphicon-pencil"></i> Edit</f:link.action>
									<f:form action="delete" arguments="{issue: issue}">
										<button class="btn btn-danger btn-sm" type="submit"><i class="glyphicon glyphicon-trash"></i> Delete</button>
									</f:form>
								</div>
							</div>

						</td>
					</tr>
				</f:for>
			</tbody>
		</table>
</f:section>