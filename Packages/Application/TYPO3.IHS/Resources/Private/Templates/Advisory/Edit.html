<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:f="http://xsd.helmut-hummel.de/ns/TYPO3/Fluid/ViewHelpers">


<f:layout name="Default" />

<f:section name="Title">Edit advisory "{advisory.identifier}: {advisory.title}"</f:section>

<f:section name="Content">
	<f:alias map="{errorContext: 'advisory'}">
		<f:render partial="FormErrors" arguments="{_all}" />
	</f:alias>

	<f:form action="update" object="{advisory}" objectName="advisory">
		<div class="form-group">
			<label for="title">Title</label>
			<f:form.textfield class="form-control" id="title" property="title" />
		</div>

		<div class="form-group">
			<label for="abstract">Abstract</label>
			<f:form.textarea class="form-control markdown" id="abstract" property="abstract" />
		</div>

		<div class="form-group">
			<label for="description">Description</label>
			<f:form.textarea class="form-control markdown" id="description" property="description" />
		</div>
		<f:if condition="{advisory.published}">
			<f:then>
				<div class="form-group">
					<label for="publishingDate">Publishingdate</label>
					<f:form.textfield class="form-control datetimepicker" id="publishingDate" name="advisory[publishingDate][date]" value="{advisory.publishingDate->f:format.date(format:'d.m.Y - H:i')}" />
					<f:form.hidden name="advisory[publishingDate][dateFormat]" value="d.m.Y - H:i" />
				</div>
			</f:then>
		</f:if>
		<fieldset>
			<legend>Issues</legend>
			<div class="col-lg-1"></div>
			<div class="col-lg-11">
				<f:render partial="ObjectCollection" section="Content" arguments="{objectName: 'Issue', objects: advisory.issues, partial:'Issue/FormFields', arguments: {advisory: advisory}, options: {advisory: advisory, products: products, solutionsAvailable: 1}, propertyPrefix: 'issues.'}"/>
			</div>
		</fieldset>

		<f:link.action class="btn" action="index">Cancel</f:link.action> <f:form.submit class="btn btn-primary" value="Update" />
	</f:form>
</f:section>

</html>