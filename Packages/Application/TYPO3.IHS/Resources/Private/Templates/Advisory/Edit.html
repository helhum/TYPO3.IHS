<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:f="http://xsd.helmut-hummel.de/ns/TYPO3/Fluid/ViewHelpers">


<f:layout name="Default" />

<f:section name="Title">Edit advisory "{advisory.identifier}: {advisory.title}"</f:section>

<f:section name="Content">
	<h1>{advisory.identifier}: {advisory.title}</h1>

	<f:form action="update" object="{advisory}" objectName="advisory" class="form-horizontal">
		<f:alias map="{errorContext: 'advisory'}">
			<f:render partial="FormErrors" arguments="{_all}" />
		</f:alias>

		<div class="form-group">
			<label for="title" class="col-sm-2 control-label">Title</label>
			<div class="col-sm-10">
				<f:form.textfield property="title" id="title" class="form-control" />
			</div>
		</div>

		<div class="form-group">
			<label for="abstract" class="col-sm-2 control-label">Abstract</label>
			<div class="col-sm-10">
				<f:form.textarea property="abstract" class="markdown" id="abstract" />
			</div>
		</div>

		<div class="form-group">
			<label for="description" class="col-sm-2 control-label">Description</label>
			<div class="col-sm-10">
				<f:form.textarea property="description" class="markdown" id="description" />
			</div>
		</div>
		<f:if condition="{advisory.published}">
			<f:then>
				<div class="form-group">
					<label for="publishingDate" class="col-sm-2 control-label">Publishingdate</label>
					<div class="col-sm-10">
						<f:form.textfield class="datetimepicker form-control" name="advisory[publishingDate][date]" value="{advisory.publishingDate->f:format.date(format:'d.m.Y - H:i')}" id="publishingDate" />
					</div>
					<f:form.hidden name="advisory[publishingDate][dateFormat]" value="d.m.Y - H:i" />
				</div>
			</f:then>
		</f:if>

		<fieldset>
			<f:render partial="ObjectCollection" section="Content" arguments="{objectName: 'Issue', legend: 'Issues', collapsIdentifierPrefix: 'issue', objects: advisory.issues, partial:'Issue/FormFields', arguments: {advisory: advisory}, options: {advisory: advisory, products: products, solutionsAvailable: 1}, propertyPrefix: 'issues.'}"/>
		</fieldset>

		<hr />
		<div class="form-group">
			<div class="col-sm-10 col-sm-offset-2">
				<f:link.action class="btn btn-default" action="index"><i class="glyphicon glyphicon-remove"></i> Cancel</f:link.action>
				<button type="submit" class="btn btn-primary"><i class="glyphicon glyphicon-ok"></i> Update</button>
			</div>
		</div>
	</f:form>
</f:section>

</html>